<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Group 2: Subway Surfers – Nikita Gautam STA 9750</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Nikita Gautam STA 9750</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-projects" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-projects">    
        <li>
    <a class="dropdown-item" href="./mp01.qmd">
 <span class="dropdown-text">Mini Project 01</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mp02.qmd">
 <span class="dropdown-text">Mini Project 02</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mp03.qmd">
 <span class="dropdown-text">Mini Project 03</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./mp04.qmd">
 <span class="dropdown-text">Mini Project 04</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Group 2: Subway Surfers</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><strong>Authors</strong></p>
<p>Nikita Gautam</p>
<p>Haolin Mo</p>
<p>Yanting Zhao</p>
<p>Zhuo Lin (Chloe) Yu</p>
<p>Timbila Nikiema</p>
<div class="callout callout-style-default callout-tip callout-titled" title="Overarching Question">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Overarching Question
</div>
</div>
<section id="how-have-delays-on-time-performance-and-safety-incidents-influenced-the-efficiency-of-subway-lines-across-nyc-boroughs-from-2020-to-2024" class="level3 callout-body-container callout-body">
<h3 class="anchored" data-anchor-id="how-have-delays-on-time-performance-and-safety-incidents-influenced-the-efficiency-of-subway-lines-across-nyc-boroughs-from-2020-to-2024">How have delays, on-time performance, and safety incidents influenced the efficiency of subway lines across NYC boroughs from 2020 to 2024?</h3>
</section>
</div>
<section id="motivations" class="level3">
<h3 class="anchored" data-anchor-id="motivations">Motivations</h3>
<p>The motivation for this analysis is to uncover how delays, on-time performance, and safety incidents impacted the efficiency of NYC subway lines and boroughs during the COVID and the post-COVID recovery period. By exploring these factors, we aim to identify patterns, address operational inefficiencies, and provide insights to improve reliability and safety for future subway operations.</p>
</section>
<section id="quantitative-findings-and-qualitative-insights" class="level3">
<h3 class="anchored" data-anchor-id="quantitative-findings-and-qualitative-insights">Quantitative Findings and Qualitative Insights</h3>
<p>High ridership leads to longer delays and higher safety risks, especially during peak hours. Track-related disruptions highlight the need for better maintenance. Winter months reduce reliability, while other seasons perform better. Post-COVID trends show changing passenger habits and service gaps on busy lines.</p>
</section>
<section id="importance-of-this-analysis" class="level3">
<h3 class="anchored" data-anchor-id="importance-of-this-analysis">Importance of this Analysis</h3>
<p>By connecting ridership, delays, and safety, we uncovered critical issues like infrastructure strain, and seasonal impacts. These insights support targeted improvements, better maintenance, resource allocation, and weather-specific strategies to enhance reliability, safety, and rider experience. This analysis demonstrates how combined metrics drive meaningful, system-wide improvements.</p>
</section>
<section id="about-our-data" class="level3">
<h3 class="anchored" data-anchor-id="about-our-data">About Our Data</h3>
<p>For our analysis, we use multiple data sets from the NYC government’s official website. They focus on different metrics. First, we use transit performance data, which evaluates train wait times against scheduled intervals and delay rates during peak and off-peak hours. Secondly, for safety data, we focus on different types of incidents, including safety incidents, track-related incidents, and train-related incidents. Lastly, for ridership data, we examine metrics such as wait times and ridership. These datasets provide us a comprehensive overview of the subway performance.</p>
</section>
<section id="data-limitation" class="level3">
<h3 class="anchored" data-anchor-id="data-limitation">Data Limitation</h3>
<p>The datasets are strong for operational and performance analysis and are up-to-date but may be biased because the datasets focus only on 2020 to 2024, excluding deeper pre-pandemic trends, longer-term recovery patterns, and the full year of 2024. Additionally, the datasets do not include some external factors, such as policy, economics, etc.and they lack exploration of differences in infrastructure or track quality between subway lines.</p>
</section>
<section id="analysis-addressing-motivating-questions" class="level3">
<h3 class="anchored" data-anchor-id="analysis-addressing-motivating-questions">Analysis addressing motivating questions</h3>
<p>The analysis explores NYC subway trends from 2020 to 2024, focusing on incidents, performance, and ridership to answer key questions about system safety, efficiency, and capacity during and after the COVID-19 pandemic.</p>
</section>
<section id="incidents-safety-concerns" class="level3">
<h3 class="anchored" data-anchor-id="incidents-safety-concerns">Incidents &amp; Safety Concerns</h3>
<p>Tracking reported incidents over the study period reveals the most common safety issues on subway lines. Temporal patterns show how incident frequency and types shifted during COVID-19 and post-pandemic recovery. These insights help contextualize changes in rider behavior and vulnerabilities in system operations during periods of fluctuating ridership.</p>
</section>
<section id="subway-performance" class="level3">
<h3 class="anchored" data-anchor-id="subway-performance">Subway Performance:</h3>
<p>Performance metrics such as terminal on-time rates and delay patterns during peak and off-peak hours are analyzed to assess operational efficiency. Comparing COVID and post-COVID periods shows how service reliability evolved as ridership recovered. Identifying high-performing lines and those with frequent delays highlights opportunities to enhance service reliability under varying demand condition</p>
</section>
<section id="key-findings-and-insights" class="level3">
<h3 class="anchored" data-anchor-id="key-findings-and-insights">Key Findings and Insights</h3>
</section>
<section id="comparative-analysis-covid-vs.-post-covid-incident-distribution" class="level3">
<h3 class="anchored" data-anchor-id="comparative-analysis-covid-vs.-post-covid-incident-distribution">Comparative Analysis: COVID vs.&nbsp;Post-COVID Incident Distribution</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Incident Reasons During COVID Period.jpg" class="img-fluid figure-img"></p>
<figcaption>MTA Incident During COVID</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Incident Reasons Post COVID Period.jpg" class="img-fluid figure-img"></p>
<figcaption>MTA Incident Post COVID</figcaption>
</figure>
</div>
<p>To ensure a balanced analysis, both the COVID (2020-2021) and post-COVID (2022-2023) periods are scaled to two years each. Pie charts will illustrate the distribution of incident categories for each period. During the COVID period, signal-related incidents were most prevalent, comprising 33.2% of all incidents, followed by persons on trackbed/police/medical incidents at 30.2%. Other notable categories included track-related incidents (10.8%) and subway car incidents (8.9%). These distributions highlight the operational challenges of maintaining reliability and addressing immediate safety concerns during the pandemic.</p>
<p>Post-COVID, the distribution shifts significantly. Persons on trackbed/police/medical incidents rose to 33.6%, becoming the largest category, while signal-related incidents decreased to 24.6%. Track-related incidents surged to 18.2%, reflecting emerging infrastructure maintenance challenges. These shifts indicate evolving priorities for MTA as the system transitions to a recovery phase, emphasizing the need for focused interventions to address rising safety and infrastructure issues.</p>
<p>Please go to this <a href="https://yantingzhao11.github.io/STA9750-2024-FALL/individualreport.html">link</a> for more detailed analysis.</p>
</section>
<section id="analysis-of-mta-subway-line-performance-peak-vs.-off-peak-delays" class="level3">
<h3 class="anchored" data-anchor-id="analysis-of-mta-subway-line-performance-peak-vs.-off-peak-delays">Analysis of MTA Subway Line Performance: Peak vs.&nbsp;Off-Peak Delays</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="animated_bar_chart.gif" class="img-fluid figure-img"></p>
<figcaption>MTA Train Delays Animation</figcaption>
</figure>
</div>
<p>The analysis of subway delay trends, comparing the COVID and Post-COVID periods, highlights significant changes in the performance of various subway lines. The animated bar chart offers a visual comparison of total delays for each subway line across these two timeframes. Delays generally increased for most subway lines, especially as New York City began to reopen. Certain lines, such as the N, F, 6, and A, experienced substantial increases in delays, with some nearly doubling. For example, delays on the N train surged from 60,073 to 100,434 after the pandemic, marking a 67.19% increase. Similarly, the 6 train delays rose from 41,200 to 98,141. This suggests that while delays were reduced during the shutdown, the return to full service and higher ridership in the post-pandemic period has led to an uptick in disruptions.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="total_delays_animation.gif" class="img-fluid figure-img"></p>
<figcaption>MTA Train Delays Line Graph</figcaption>
</figure>
</div>
<p>Furthermore,the animated plot was created to show how total delays changed monthly for both peak and off-peak periods. The plot revealed several trends, including a significant drop in delays during the early months of 2020, followed by a surge in delays as the city reopened and ridership increased. First quarter of 2020 saw a significant drop in delays due to the NYC shutdown in response to the pandemic. Mid-2021 marked the highest surge in delays, coinciding with the city’s phased reopening and increased ridership.</p>
<p>Please go to this <a href="https://chloe384.github.io/STA9750-2024-FALL/individual.html">link</a> for more detailed analysis.</p>
</section>
<section id="how-have-safety-incidents-persons-on-trackbedpolicemedical-reported-to-the-mta-changed-between-covid-and-post-covid" class="level3">
<h3 class="anchored" data-anchor-id="how-have-safety-incidents-persons-on-trackbedpolicemedical-reported-to-the-mta-changed-between-covid-and-post-covid">How have safety incidents (Persons on Trackbed/Police/Medical) reported to the MTA changed between COVID and Post-COVID?</h3>
<p>The analysis focuses on the persons on trackbed/police/medical category from incidents and compares the average annual number of safety incidents across numbered subway lines and lettered subway lines.&nbsp;</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="numbered_line.png" class="img-fluid figure-img"></p>
<figcaption>Numbered Subway Lines</figcaption>
</figure>
</div>
<p>For numbered subway lines, the bar chart shows that while the average annual number of safety incidents is decreased for the 6 and 4 train, it is increased on all other lines, so the overall trends from covid to post-covid time periods increase by 13.61%. The 6 train has the highest average incidents during both periods but decreased to 9.3 in post-COVID. The 5 train and 7 train have increase the most of almost any numbered subway line.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="group_project/lettered_line.png" class="img-fluid figure-img"></p>
<figcaption>Lettered Subway Lines</figcaption>
</figure>
</div>
<p>For lettered subway lines, the numbers of annual average safety incidents of almost all subway increase, except the R and D train, with increase by 34%. The A, E, F, and N trains exhibit a significant increase from an average of 4 incidents during COVID to 7.3 incidents post-COVID, which increase the most across all lines.</p>
<p>Overall, almost all subway lines face serious safety problems. With everyone returning to normal life from the post-covid recovery, it will pose a threat to rider safety if improvements are not made to the safety incident problem.</p>
<p>Please go to this <a href="https://haolinnn.github.io/STA9750-2024-FALL/individual.html">link</a> for more detailed analysis.</p>
</section>
<section id="what-is-the-trend-in-terminal-on-time-performance-from-2020-to-2024-how-does-performance-differ-between-the-covid-period-and-post-covid-recovery" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-trend-in-terminal-on-time-performance-from-2020-to-2024-how-does-performance-differ-between-the-covid-period-and-post-covid-recovery">What is the trend in terminal on-time performance from 2020 to 2024? How does performance differ between the COVID period and post-COVID recovery ?</h3>
</section>
<section id="trend-of-on-terminal-by-borough" class="level3">
<h3 class="anchored" data-anchor-id="trend-of-on-terminal-by-borough">Trend of On-terminal by Borough</h3>
<p>This shows comparative analysis of average terminal on-time performance by borough from 2020 to 2024. It highlights variations in performance across the Bronx, Brooklyn, Manhattan, and Queens. We aim to uncover how delays and safety incidents may have influenced overall efficiency. This will help pinpoint areas of operational strain and provide insights for improving performance and reliability across the subway system..</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="animated_borough_performance.gif" class="img-fluid figure-img"></p>
<figcaption>Lettered Subway Lines</figcaption>
</figure>
</div>
<p>The graph highlights borough-specific trends in on-time performance from 2020 to 2024, with a sharp decline in 2022 due to post-pandemic challenges. Queens consistently performed better, indicating greater resilience, while Brooklyn and the Bronx showed slower recovery and lower efficiency.The findings emphasize the need for targeted efforts to address delays, safety concerns, and operational inefficiencies.</p>
</section>
<section id="seasonal-impact" class="level3">
<h3 class="anchored" data-anchor-id="seasonal-impact">Seasonal Impact&nbsp;</h3>
<p>Let’s identify seasonal and monthly trends. The goal is to highlight how external factors, such as weather and operational challenges, impact system reliability.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Weather_Impact.png" class="img-fluid figure-img"></p>
<figcaption>Weather Impact</figcaption>
</figure>
</div>
<p>The seasonal analysis shows distinct trends. Winter has variability, with a dip in February and recovery in December due to weather. Spring performs best, steadily improving to peak in May. Summer stays stable with a small drop in July and recovery in August.&nbsp;</p>
<p>Please go to this <a href="https://nikitagtm.github.io/STA9750-2024-FALL/individual_report.html">On-Terminal Performance(2020-2024)</a> for more detailed analysis.</p>
</section>
<section id="what-is-the-relationship-between-ridership-and-wait-times-and-does-higher-ridership-correlate-with-longer-wait-times" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-relationship-between-ridership-and-wait-times-and-does-higher-ridership-correlate-with-longer-wait-times">What is the relationship between ridership and wait times, and does higher ridership correlate with longer wait times?</h3>
<p><strong><em>Ridership Trend Analysis by Line</em></strong></p>
<p>Graph 1: <img src="ridership_plot.png" class="img-fluid" alt="Ridership trend"></p>
<p>Ridership and wait time data provide insights into system dynamics across lines: High-Ridership Lines: Lines 1, 6, and 4 experience the highest ridership due to their service in densely populated and commercially active areas. Low-Ridership Lines: Shuttle services (e.g., S Rock, S Fkn, S 42nd) show the lowest ridership due to their limited scope. Passenger Distribution: Ridership on high-use lines (e.g., 1, 6) contrasts sharply with mid-tier lines (e.g., Q, R, C), reflecting variations in population density, service frequency, and transit connectivity</p>
<p><strong><em>Average Wait Time Analysis by Line</em></strong></p>
<p>Graph 2: <img src="avg_time_plot.png" class="img-fluid" alt="Average wait time"></p>
<p>Line Variability: Shuttle lines consistently have the lowest wait times due to their shorter routes, while lines like B, D, M, and R face higher wait times, often due to congestion or complex operations. Trends Over Time: Most lines exhibit stable wait times across pre-COVID, COVID, and post-COVID periods, with notable variability on lines like C and R due to operational changes.</p>
<p><strong><em>Correlation Analysis</em></strong></p>
<p>Graph3: <img src="correlation_plot.png" class="img-fluid" alt="Correlation"></p>
<p>Higher ridership shows a weak positive correlation with wait times, but service frequency and efficiency significantly influence outcomes. Effective strategies on shuttle and high-ridership lines highlight potential for managing demand. These insights support improving subway safety, performance, and reliability by addressing congestion and enhancing operations on busy routes.<a href="https://timbila614.github.io/STA9750-2024-FALL/Individual_report.html">TimbilaNikiema</a></p>
</section>
<section id="relation-to-prior-work" class="level3">
<h3 class="anchored" data-anchor-id="relation-to-prior-work">Relation to Prior Work</h3>
<p>The MTA’s annual performance metrics reports play a crucial role in evaluating the effectiveness of its public transportation services. By using benchmarking techniques, the MTA compares its performance against peer agencies, which helps identify best practices that can be implemented to improve operational efficiency and cost-effectiveness. These performance metrics are made publicly available to ensure transparency and are submitted to oversight agencies such as the FTA, while also being included in the National Transit Database.</p>
<p>Our group’s work builds directly on this foundation by analyzing incident categories and trends, which aligns with the MTA’s commitment to using data for continuous service improvement. Our focus on incident trends, particularly post-COVID, offers more detailed insights that complement the broader performance metrics reported in the MTA’s annual reports. By focusing on the shifts in incidents during and after the pandemic, we shed light on the evolving operational challenges the MTA faces. Our analysis not only contributes to understanding the impact of these trends but also provides valuable context to help guide future decision-making within the organization.</p>
</section>
<section id="potential-next-steps" class="level3">
<h3 class="anchored" data-anchor-id="potential-next-steps">Potential Next Steps:</h3>
</section>
<section id="pre-pandemic-trends-and-long-term-patterns" class="level3">
<h3 class="anchored" data-anchor-id="pre-pandemic-trends-and-long-term-patterns">Pre-Pandemic Trends and Long-Term Patterns</h3>
<p>Analyzing subway performance prior to the pandemic is vital for establishing a benchmark for comparison. Historical data can reveal long-term performance trends, pinpointing recurring issues with specific lines or infrastructure challenges that existed before COVID-19. Expanding the time frame back to the early 21st century will provide a clearer picture. This analysis helps differentiate between issues caused by the pandemic and those that have persisted over time.</p>
</section>
<section id="variations-across-subway-lines-and-boroughs" class="level3">
<h3 class="anchored" data-anchor-id="variations-across-subway-lines-and-boroughs">Variations Across Subway Lines and Boroughs</h3>
<p>Further research should explore performance differences across subway lines and boroughs. Factors like infrastructure quality, line age, and service frequency affect service consistency. Older subway lines or those with outdated infrastructure tend to experience more maintenance issues and delays. Identifying these disparities allows for targeted solutions, such as infrastructure upgrades, more frequent service on high-demand routes, or new trains for aging lines.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/<GITHUB_NAME>\.github\.io\/STA9750-2024-FALL\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>